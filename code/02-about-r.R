## ----setup, include=FALSE----------------------------------------------------------------------------------------------------------
knitr::opts_chunk$set(warning = FALSE, message = FALSE, 
                      fig.retina = 3, fig.align = "center")


## ----packages-data, include=FALSE--------------------------------------------------------------------------------------------------
library(flipbookr)
library(cowplot)
ggplot2::theme_set(theme_cowplot())



## ----xaringanExtra, echo=FALSE-----------------------------------------------------------------------------------------------------
xaringanExtra::use_xaringan_extra(c("tile_view"))
xaringanExtra::use_animate_css()
xaringanExtra::use_animate_all("fade")
xaringanExtra::use_clipboard()


## ----loadtv, message = TRUE--------------------------------------------------------------------------------------------------------
library(tidyverse)


## ----02-about-r-1------------------------------------------------------------------------------------------------------------------
## Inside code chunks, lines beginning with a # character are comments
## Comments are ignored by R

my_numbers <- c(1, 1, 2, 4, 1, 3, 1, 5) # Anything after a # character is ignored as well



## ----02-about-r-2------------------------------------------------------------------------------------------------------------------
my_numbers 


## ----02-about-r-3------------------------------------------------------------------------------------------------------------------
my_numbers 


## ----02-about-r-4------------------------------------------------------------------------------------------------------------------
letters


## ----02-about-r-5------------------------------------------------------------------------------------------------------------------
(31 * 12) / 2^4


## ----02-about-r-6------------------------------------------------------------------------------------------------------------------
sqrt(25)


## ----02-about-r-7------------------------------------------------------------------------------------------------------------------
log(100)

log10(100)



## ----02-about-r-8------------------------------------------------------------------------------------------------------------------
4 < 10
4 > 2 & 1 > 0.5 # The "&" means "and"
4 < 2 | 1 > 0.5 # The "|" means "or"
4 < 2 | 1 < 0.5


## ----02-about-r-9------------------------------------------------------------------------------------------------------------------

## A logical test
2 == 2


## ----02-about-r-10, eval = FALSE---------------------------------------------------------------------------------------------------
## ## This will cause an error, because R will think you are trying to assign a value
## 2 = 2
## 
## ## Error in 2 = 2 : invalid (do_set) left-hand side to assignment


## ----02-about-r-11-----------------------------------------------------------------------------------------------------------------
3 != 7


## ----02-about-r-12-----------------------------------------------------------------------------------------------------------------
3 < 5 & 7


## ----02-about-r-13-----------------------------------------------------------------------------------------------------------------
3 < 5 & 1


## ----02-about-r-14-----------------------------------------------------------------------------------------------------------------
TRUE & as.logical(1)


## ----02-about-r-15-----------------------------------------------------------------------------------------------------------------
3 < 5 & 3 < 1


## ----02-about-r-16-----------------------------------------------------------------------------------------------------------------
0.6 + 0.2 == 0.8


## ----02-about-r-17-----------------------------------------------------------------------------------------------------------------
0.6 + 0.3 == 0.9


## ----02-about-r-18-----------------------------------------------------------------------------------------------------------------
print(.1 + .2)
print(.1 + .2, digits=18)

all.equal(.1 + .2, 0.3)


## ----02-about-r-19-----------------------------------------------------------------------------------------------------------------
my_numbers # We created this a few minutes ago

letters  # This one is built-in

pi  # Also built-in


## ----02-about-r-20, eval = FALSE---------------------------------------------------------------------------------------------------
## TRUE
## FALSE
## Inf
## NaN
## NA
## NULL
## 
## for
## if
## while
## break
## function


## ----02-about-r-21-----------------------------------------------------------------------------------------------------------------
letters


## ----02-about-r-22-----------------------------------------------------------------------------------------------------------------
pi


## ----02-about-r-23-----------------------------------------------------------------------------------------------------------------

LETTERS


## ----02-about-r-24-----------------------------------------------------------------------------------------------------------------
## name... gets ... this stuff
my_numbers <- c(1, 2, 3, 1, 3, 5, 25, 10)

## name ... gets ... the output of the function `c()`
your_numbers <- c(5, 31, 71, 1, 3, 21, 6, 52)


## ----02-about-r-25-----------------------------------------------------------------------------------------------------------------
my_numbers = c(1, 2, 3, 1, 3, 5, 25)

my_numbers


## ----create_objects_again----------------------------------------------------------------------------------------------------------

## this object... gets ... the output of this function
my_numbers <- c(1, 2, 3, 1, 3, 5, 25, 10)

your_numbers <- c(5, 31, 71, 1, 3, 21, 6, 52)


## ----02-get-started-3--------------------------------------------------------------------------------------------------------------
my_numbers


## ----02-get-started-4--------------------------------------------------------------------------------------------------------------
my_numbers 


## ----this_will_error, eval = FALSE-------------------------------------------------------------------------------------------------
## ## If you run this you'll get an error
## mean()


## ----02-about-r-26-----------------------------------------------------------------------------------------------------------------
## Get the mean of what? Of x.
## You need to tell the function what x is
mean(x = my_numbers)

mean(x = your_numbers)


## ----02-about-r-27-----------------------------------------------------------------------------------------------------------------
mean(your_numbers)


## ----02-about-r-28, eval=FALSE-----------------------------------------------------------------------------------------------------
## help(mean)


## ----02-about-r-29, eval = FALSE---------------------------------------------------------------------------------------------------
## ## quicker
## ?mean


## ----02-about-r-30-----------------------------------------------------------------------------------------------------------------
missing_numbers <- c(1:10, NA, 20, 32, 50, 104, 32, 147, 99, NA, 45)

mean(missing_numbers)

mean(missing_numbers, na.rm = TRUE)


## ----02-about-r-31-----------------------------------------------------------------------------------------------------------------
## Look at ?mean to see what `trim` does
mean(missing_numbers, na.rm = TRUE, trim = 0.1)


## ----02-about-r-32-----------------------------------------------------------------------------------------------------------------
summary(my_numbers)


## ----02-about-r-33-----------------------------------------------------------------------------------------------------------------
my_summary <- summary(my_numbers)

my_summary


## ----02-about-r-34, eval = FALSE---------------------------------------------------------------------------------------------------
## ## rm() function removes objects
## rm(my_summary)
## 
## my_summary
## 
## ## Error: object 'my_summary' not found


## ----02-about-r-35-----------------------------------------------------------------------------------------------------------------
c(1:20)


## ----02-about-r-36-----------------------------------------------------------------------------------------------------------------
mean(c(1:20))


## ----02-about-r-37-----------------------------------------------------------------------------------------------------------------
summary(mean(c(1:20)))


## ----02-about-r-38-----------------------------------------------------------------------------------------------------------------
names(summary(mean(c(1:20))))


## ----02-about-r-39-----------------------------------------------------------------------------------------------------------------
length(names(summary(mean(c(1:20)))))


## ----02-about-r-40-----------------------------------------------------------------------------------------------------------------
c(1:20) %>% mean() %>% summary() %>% names() %>%  length()


## ----02-about-r-41-----------------------------------------------------------------------------------------------------------------
c(1:20) %>% 
  mean() %>% 
  summary() %>% 
  names() %>% 
  length()


## ----02-about-r-42-----------------------------------------------------------------------------------------------------------------
## A package containing a dataset rather than functions
library(gapminder)

gapminder


## ----02-about-r-43, eval = FALSE---------------------------------------------------------------------------------------------------
## ## Do at least once for each package. Once done, not needed each time.
## install.packages("palmerpenguins", repos = "http://cran.rstudio.com")
## 
## ## Needed sometimes, especially after an R major version upgrade.
## update.packages(repos = "http://cran.rstudio.com")
## 


## ----02-about-r-44-----------------------------------------------------------------------------------------------------------------
## To load a package, usually at the start of your RMarkdown document or script file
library(palmerpenguins)
penguins


## ----02-about-r-45, message = FALSE, echo = FALSE----------------------------------------------------------------------------------
gtsummary::theme_gtsummary_journal(journal = "jama")
gtsummary::theme_gtsummary_compact()


## ----02-about-r-46-----------------------------------------------------------------------------------------------------------------
## A little glimpse of what we'll do soon
penguins %>% 
  select(species, body_mass_g, sex) %>% 
  gtsummary::tbl_summary(by = species) #<<


## ----02-about-r-47-----------------------------------------------------------------------------------------------------------------
x <- c(1:10)
y <- c(90:100)

x

y


## ----02-about-r-48-----------------------------------------------------------------------------------------------------------------
mean(x) # argument names are internal to functions

mean(x = x)

mean(x = y)

x

y



## ----02-about-r-49-----------------------------------------------------------------------------------------------------------------
class(my_numbers)
typeof(my_numbers)


## ----02-about-r-50-----------------------------------------------------------------------------------------------------------------
summary(my_numbers)

my_smry <- summary(my_numbers) # remember, outputs can be assigned to a name, creating an object

class(summary(my_numbers)) # functions can be nested, and are evaluated from the inside out

class(my_smry) # equivalent to the previous line


## ----02-about-r-51-----------------------------------------------------------------------------------------------------------------
typeof(my_smry)
attributes(my_smry)

## In this case, the functions extract the corresponding attribute
class(my_smry)
names(my_smry)


## ----02-about-r-52-----------------------------------------------------------------------------------------------------------------
my_int <- c(1, 3, 5, 6, 10)
is.integer(my_int)
is.double(my_int)

my_int <- as.integer(my_int)
is.integer(my_int)

my_chr <- c("Mary", "had", "a", "little", "lamb")
is.character(my_chr)

my_lgl <- c(TRUE, FALSE, TRUE)
is.logical(my_lgl)



## ----02-about-r-53-----------------------------------------------------------------------------------------------------------------
## Factors are for storing undordered or ordered categorical variables
x <- factor(c("Yes", "No", "No", "Maybe", "Yes", "Yes", "Yes", "No"))
x

summary(x) # Alphabetical order by default

typeof(x)       # Underneath, a factor is a type of integer ...
attributes(x)   # ... with labels for its numbers, or "levels" 
class(x)
levels(x)
is.ordered(x)



## ----02-get-started-9--------------------------------------------------------------------------------------------------------------
class(my_numbers)

my_new_vector <- c(my_numbers, "Apple")

my_new_vector # vectors are homogeneous/atomic

class(my_new_vector)


## ----02-about-r-54-----------------------------------------------------------------------------------------------------------------
my_dbl <- c(2.1, 4.77, 30.111, 3.14519)
is.double(my_dbl)

my_dbl <- as.integer(my_dbl)

my_dbl



## ----02-about-r-55-----------------------------------------------------------------------------------------------------------------
gapminder # tibbles and data frames can contain vectors of different types

class(gapminder)
typeof(gapminder) # hmm



## ----titanic1----------------------------------------------------------------------------------------------------------------------
library(socviz)
titanic
class(titanic)


## ----titanic2----------------------------------------------------------------------------------------------------------------------
## The `$` idiom picks out a named column here; 
## more generally, the named element of a list
titanic$percent  


## ----titanic3----------------------------------------------------------------------------------------------------------------------
## tibbles are build on data frames 
titanic_tb <- as_tibble(titanic) 
class(titanic)
titanic_tb
class(titanic_tb)


## ----02-about-r-56-----------------------------------------------------------------------------------------------------------------
gss_sm


## ----02-about-r-57-----------------------------------------------------------------------------------------------------------------
my_numbers

result1 <- my_numbers + 1



## ----02-about-r-58-----------------------------------------------------------------------------------------------------------------
result1


## ----02-about-r-59-----------------------------------------------------------------------------------------------------------------
result2 <- my_numbers + my_numbers



## ----02-about-r-60-----------------------------------------------------------------------------------------------------------------
result2


## ----02-about-r-61, warning=TRUE---------------------------------------------------------------------------------------------------
two_nums <- c(5, 10)

result3 <- my_numbers + two_nums



## ----02-about-r-62-----------------------------------------------------------------------------------------------------------------
result3


## ----02-about-r-63, warning=TRUE---------------------------------------------------------------------------------------------------
three_nums <- c(1, 5, 10)

result4 <- my_numbers + three_nums



## ----02-about-r-64-----------------------------------------------------------------------------------------------------------------
result4

